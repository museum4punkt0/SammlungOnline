{
  "resource_version": 106,
  "metadata": {
    "version": 3,
    "sources": [
      {
        "name": "default",
        "kind": "postgres",
        "tables": [
          {
            "table": {
              "name": "assortments",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "assortments_objects",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "assortment_id",
                    "table": {
                      "name": "assortments_objects",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "i18n",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "assortment_id",
                    "table": {
                      "name": "assortments_translation",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "computed_fields": [
              {
                "name": "searchValue",
                "definition": {
                  "function": {
                    "name": "build_search_value_a",
                    "schema": "smb"
                  }
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "id",
                    "key",
                    "preview_image",
                    "search_query",
                    "search_query_type"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "key",
                    "preview_image",
                    "search_query",
                    "search_query_type"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "key",
                    "preview_image"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {
                    "_not": {
                      "_and": [
                        {
                          "key": {
                            "_like": "%.%"
                          }
                        },
                        {
                          "search_query_type": {
                            "_eq": "OBJECT_GROUP"
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "key",
                    "preview_image",
                    "search_query",
                    "search_query_type"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-assortment",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              },
              {
                "name": "re-sync-assortment",
                "definition": {
                  "enable_manual": true,
                  "insert": {
                    "columns": "*"
                  },
                  "update": {
                    "columns": [
                      "key",
                      "search_query_type"
                    ]
                  }
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 3600
                },
                "webhook": "http://smb-mds-sync:8082/admin/trigger/sync"
              }
            ]
          },
          {
            "table": {
              "name": "assortments_objects",
              "schema": "smb"
            },
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "assortment_id",
                    "object_id"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "assortment_id",
                    "object_id"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "assortment_id",
                    "object_id"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-assortment-obj",
                "definition": {
                  "delete": {
                    "columns": "*"
                  },
                  "enable_manual": false,
                  "insert": {
                    "columns": "*"
                  },
                  "update": {
                    "columns": [
                      "assortment_id",
                      "object_id"
                    ]
                  }
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 60
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              }
            ]
          },
          {
            "table": {
              "name": "assortments_translation",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "abstract",
                    "assortment_id",
                    "description",
                    "language_id",
                    "subtitle",
                    "title"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "abstract",
                    "assortment_id",
                    "description",
                    "id",
                    "language_id",
                    "subtitle",
                    "title"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "abstract",
                    "description",
                    "subtitle",
                    "title"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "abstract",
                    "assortment_id",
                    "description",
                    "language_id",
                    "subtitle",
                    "title"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "attachments",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "license",
                "using": {
                  "foreign_key_constraint_on": "license_id"
                }
              }
            ],
            "computed_fields": [
              {
                "name": "name",
                "definition": {
                  "function": {
                    "name": "get_attachment_filename",
                    "schema": "smb"
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "attachment",
                    "credits",
                    "id",
                    "media_type",
                    "object_id",
                    "primary",
                    "updated_at"
                  ],
                  "computed_fields": [
                    "name"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "attachment",
                    "credits",
                    "id",
                    "media_type",
                    "primary"
                  ],
                  "computed_fields": [
                    "name"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "attribute_approval",
              "schema": "smb"
            },
            "computed_fields": [
              {
                "name": "approvals",
                "definition": {
                  "function": {
                    "name": "extract_approvals",
                    "schema": "smb"
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "attribute_key"
                  ],
                  "computed_fields": [
                    "approvals"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "attribute_translations",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "attribute",
                "using": {
                  "foreign_key_constraint_on": "attribute_key"
                }
              },
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "attribute_key",
                    "fq_key",
                    "id",
                    "language_id",
                    "object_id",
                    "value",
                    "visible"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "attribute_key",
                    "value"
                  ],
                  "filter": {
                    "_and": [
                      {
                        "visible": {
                          "_eq": true
                        }
                      },
                      {
                        "attribute_key": {
                          "_nlike": "ObjPerAssociationRef.%"
                        }
                      },
                      {
                        "attribute_key": {
                          "_nlike": "ObjGeograficGrp.%"
                        }
                      },
                      {
                        "value": {
                          "_nlike": "%Depot%"
                        }
                      }
                    ]
                  },
                  "limit": 1500
                }
              }
            ]
          },
          {
            "table": {
              "name": "attributes",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "approvals",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "attribute_key",
                    "table": {
                      "name": "attribute_approval",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "datatype",
                    "key"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "datatype",
                    "key"
                  ],
                  "filter": {},
                  "limit": 1500
                }
              }
            ]
          },
          {
            "table": {
              "name": "blocked_attachments",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "license",
                "using": {
                  "foreign_key_constraint_on": "license_id"
                }
              }
            ],
            "array_relationships": [
              {
                "name": "attachments",
                "using": {
                  "manual_configuration": {
                    "column_mapping": {
                      "id": "id"
                    },
                    "insertion_order": null,
                    "remote_table": {
                      "name": "attachments",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "id",
                    "license_id"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "license_id"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "license_id"
                  ],
                  "filter": {},
                  "check": null
                }
              }
            ]
          },
          {
            "table": {
              "name": "buildings",
              "schema": "smb"
            },
            "computed_fields": [
              {
                "name": "searchValue",
                "definition": {
                  "function": {
                    "name": "build_search_value_b",
                    "schema": "smb"
                  }
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "key",
                    "title"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "key",
                    "title"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "key",
                    "title"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "key",
                    "title"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-location",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              }
            ]
          },
          {
            "table": {
              "name": "collections",
              "schema": "smb"
            },
            "computed_fields": [
              {
                "name": "searchValue",
                "definition": {
                  "function": {
                    "name": "build_search_value_c",
                    "schema": "smb"
                  }
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "key",
                    "title",
                    "type"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "key",
                    "title",
                    "type"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "key",
                    "title",
                    "type"
                  ],
                  "computed_fields": [
                    "searchValue"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "key",
                    "title",
                    "type"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-collection",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              },
              {
                "name": "re-sync-collection",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 3600
                },
                "webhook": "http://smb-mds-sync:8082/admin/trigger/sync"
              }
            ]
          },
          {
            "table": {
              "name": "cultural_references",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "denomination_voc",
                "using": {
                  "foreign_key_constraint_on": "denomination_voc_id"
                }
              },
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              },
              {
                "name": "name_voc",
                "using": {
                  "foreign_key_constraint_on": "name_voc_id"
                }
              },
              {
                "name": "type_voc",
                "using": {
                  "foreign_key_constraint_on": "type_voc_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "object_id",
                    "culture_item_id",
                    "language_id",
                    "name_voc_id",
                    "type_voc_id",
                    "denomination_voc_id",
                    "sequence"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "sequence"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "exhibitions",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "exhibitions_objects",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "exhibition_id",
                    "table": {
                      "name": "exhibitions_objects",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "description",
                    "end_date",
                    "location",
                    "start_date",
                    "title",
                    "created_at",
                    "updated_at"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "description",
                    "end_date",
                    "location",
                    "start_date",
                    "title"
                  ],
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-exhibition",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
                }
              }
            ]
          },
          {
            "table": {
              "name": "exhibitions_objects",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "exhibition",
                "using": {
                  "foreign_key_constraint_on": "exhibition_id"
                }
              },
              {
                "name": "object",
                "using": {
                  "foreign_key_constraint_on": "object_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "exhibition_id",
                    "id",
                    "object_id",
                    "created_at",
                    "updated_at"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "geographical_references",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "geopol_voc",
                "using": {
                  "foreign_key_constraint_on": "geopol_voc_id"
                }
              },
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              },
              {
                "name": "place_voc",
                "using": {
                  "foreign_key_constraint_on": "place_voc_id"
                }
              },
              {
                "name": "type_voc",
                "using": {
                  "foreign_key_constraint_on": "type_voc_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "details",
                    "geo_item_id",
                    "geopol_voc_id",
                    "id",
                    "language_id",
                    "object_id",
                    "place_voc_id",
                    "sequence",
                    "type_voc_id"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "details",
                    "sequence"
                  ],
                  "filter": {
                    "type_voc": {
                      "name": {
                        "_nin": [
                          "Statistischer Bezug",
                          "Fundort Ausgabe",
                          "Fundort (aktueller)",
                          "Fundort (normiert)",
                          "Fundort (Variante)",
                          "Fundort (historisch 1800)",
                          "Fundort (historisch 1900)",
                          "Fundort (historisch 2000)"
                        ]
                      }
                    }
                  }
                }
              }
            ]
          },
          {
            "table": {
              "name": "highlights",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "object",
                "using": {
                  "foreign_key_constraint_on": "object_id"
                }
              },
              {
                "name": "org_unit",
                "using": {
                  "foreign_key_constraint_on": "org_unit_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "org_unit_id",
                    "object_id"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "object_id"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              }
            ]
          },
          {
            "table": {
              "name": "ignoreable_keys",
              "schema": "smb"
            },
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "id",
                    "key"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "key"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "key"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "language",
              "schema": "smb"
            },
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "lang"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "lang"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "licenses",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "i18n",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "license_id",
                    "table": {
                      "name": "licenses_translation",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "key",
                    "link"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "key",
                    "link"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "licenses_translation",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "content",
                    "language_id",
                    "license_id",
                    "license_text"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "content",
                    "id",
                    "language_id",
                    "license_id",
                    "license_text"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "content",
                    "license_text"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "content",
                    "language_id",
                    "license_id",
                    "license_text"
                  ],
                  "filter": {},
                  "check": null
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "material_references",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              },
              {
                "name": "specific_type_voc",
                "using": {
                  "foreign_key_constraint_on": "specific_type_voc_id"
                }
              },
              {
                "name": "type_voc",
                "using": {
                  "foreign_key_constraint_on": "type_voc_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "language_id",
                    "material_item_id",
                    "object_id",
                    "specific_type_voc_id",
                    "type_voc_id",
                    "sequence",
                    "details"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "details",
                    "sequence"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "objects",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "location",
                "using": {
                  "foreign_key_constraint_on": "location_voc_id"
                }
              }
            ],
            "array_relationships": [
              {
                "name": "attachments",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "attachments",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "attributes",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "attribute_translations",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "cultural_references",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "cultural_references",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "exhibitions",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "exhibitions_objects",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "geographical_references",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "geographical_references",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "highlights",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "highlights",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "involved_parties",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "persons_objects",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "materials_and_techniques",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "object_id",
                    "table": {
                      "name": "material_references",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "computed_fields": [
              {
                "name": "collectionKey",
                "definition": {
                  "function": {
                    "name": "extract_collection_key",
                    "schema": "smb"
                  }
                },
                "comment": ""
              },
              {
                "name": "compilation",
                "definition": {
                  "function": {
                    "name": "extract_compilation",
                    "schema": "smb"
                  }
                },
                "comment": ""
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "location_voc_id",
                    "exhibition_space",
                    "created_at",
                    "updated_at"
                  ],
                  "computed_fields": [
                    "collectionKey",
                    "compilation"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "exhibition_space",
                    "id",
                    "updated_at"
                  ],
                  "computed_fields": [
                    "collectionKey",
                    "compilation"
                  ],
                  "filter": {},
                  "limit": 50,
                  "allow_aggregations": true
                }
              }
            ],
            "event_triggers": [
              {
                "name": "delete-from-elastic",
                "definition": {
                  "delete": {
                    "columns": "*"
                  },
                  "enable_manual": false
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 1,
                  "timeout_sec": 300
                },
                "webhook": "http://smb-search-indexer:8085/triggers/delete-event"
              },
              {
                "name": "re-index-object",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 120
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              },
              {
                "name": "re-sync-object",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-mds-sync:8082/admin/trigger/sync"
              }
            ]
          },
          {
            "table": {
              "name": "org_unit",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "highlights",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "org_unit_id",
                    "table": {
                      "name": "highlights",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "computed_fields": [
              {
                "name": "collectionKey",
                "definition": {
                  "function": {
                    "name": "find_collection",
                    "schema": "smb"
                  }
                },
                "comment": ""
              },
              {
                "name": "searchValue",
                "definition": {
                  "function": {
                    "name": "build_search_value_o",
                    "schema": "smb"
                  }
                }
              }
            ],
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "id",
                    "is_compilation",
                    "name",
                    "title"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "is_compilation",
                    "name",
                    "title"
                  ],
                  "computed_fields": [
                    "collectionKey"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "is_compilation",
                    "name",
                    "title"
                  ],
                  "computed_fields": [
                    "collectionKey",
                    "searchValue"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "is_compilation",
                    "name",
                    "title"
                  ],
                  "filter": {},
                  "check": {}
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-compilation",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
              },
              {
                "name": "re-sync-orgunit",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 3600
                },
                "webhook": "http://smb-mds-sync:8082/admin/trigger/sync"
              }
            ]
          },
          {
            "table": {
              "name": "persons",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "involved_parties",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "person_id",
                    "table": {
                      "name": "persons_objects",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "created_at",
                    "date_of_birth",
                    "date_of_death",
                    "date_range",
                    "id",
                    "name",
                    "updated_at"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "date_of_birth",
                    "date_of_death",
                    "date_range",
                    "name"
                  ],
                  "filter": {}
                }
              }
            ],
            "event_triggers": [
              {
                "name": "re-index-person",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 600
                },
                "webhook": "http://smb-search-indexer:8085/triggers/index-event"
                }
              }
            ]
          },
          {
            "table": {
              "name": "persons_objects",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "attribution_voc",
                "using": {
                  "foreign_key_constraint_on": "attribution_voc_id"
                }
              },
              {
                "name": "object",
                "using": {
                  "foreign_key_constraint_on": "object_id"
                }
              },
              {
                "name": "person",
                "using": {
                  "foreign_key_constraint_on": "person_id"
                }
              },
              {
                "name": "role_voc",
                "using": {
                  "foreign_key_constraint_on": "role_voc_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "attribution_voc_id",
                    "created_at",
                    "id",
                    "object_id",
                    "person_id",
                    "role_voc_id",
                    "sequence",
                    "updated_at"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "sequence"
                  ],
                  "filter": {
                    "role_voc": {
                      "name": {
                        "_nin": [
                          "Leihgeber",
                          "Mzen",
                          "Nachlasser",
                          "Person",
                          "Veruerer",
                          "Vorbesitzer"
                        ]
                      }
                    }
                  }
                }
              }
            ]
          },
          {
            "table": {
              "name": "stt_platform",
              "schema": "smb"
            },
            "is_enum": true
          },
          {
            "table": {
              "name": "stt_platform_config",
              "schema": "smb"
            },
            "insert_permissions": [
              {
                "role": "editor",
                "permission": {
                  "check": {},
                  "columns": [
                    "enable_story_filter",
                    "hero_slider_limit",
                    "hide_in_overview",
                    "link_template",
                    "platform_key"
                  ]
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "platform_key",
                    "link_template",
                    "hide_in_overview",
                    "hero_slider_limit",
                    "enable_story_filter",
                    "created_at",
                    "updated_at"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "enable_story_filter",
                    "hero_slider_limit",
                    "hide_in_overview",
                    "link_template",
                    "platform_key"
                  ],
                  "filter": {}
                }
              }
            ],
            "update_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "enable_story_filter",
                    "hero_slider_limit",
                    "hide_in_overview",
                    "platform_key"
                  ],
                  "filter": {},
                  "check": null
                }
              }
            ],
            "delete_permissions": [
              {
                "role": "editor",
                "permission": {
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "sync_cycle_type",
              "schema": "smb"
            },
            "is_enum": true,
            "array_relationships": [
              {
                "name": "sync_cycles",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "type",
                    "table": {
                      "name": "sync_cycles",
                      "schema": "smb"
                    }
                  }
                }
              }
            ]
          },
          {
            "table": {
              "name": "sync_cycles",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "sync_cycle_type",
                "using": {
                  "foreign_key_constraint_on": "type"
                }
              }
            ],
            "event_triggers": [
              {
                "name": "retry-failed",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 3600
                },
                "webhook": "http://smb-mds-sync:8082/admin/sync",
                "request_transform": {
                  "body": {
                    "action": "transform",
                    "template": "{\n  \"type\": \"MANUAL\",\n  \"module\": {{$body.event.data.new.module}},\n  \"ids\": {{$body.event.data.new.failed_ids}}\n}"
                  },
                  "method": "PATCH",
                  "query_params": {},
                  "template_engine": "Kriti",
                  "version": 2
                }
              },
              {
                "name": "retry-skipped",
                "definition": {
                  "enable_manual": true
                },
                "retry_conf": {
                  "interval_sec": 10,
                  "num_retries": 0,
                  "timeout_sec": 3600
                },
                "webhook": "http://smb-mds-sync:8082/admin/sync",
                "request_transform": {
                  "body": {
                    "action": "transform",
                    "template": "{\n  \"type\": \"MANUAL\",\n  \"module\": {{$body.event.data.new.module}},\n  \"ids\": {{$body.event.data.new.skipped_ids}}\n}"
                  },
                  "method": "PATCH",
                  "query_params": {},
                  "template_engine": "Kriti",
                  "version": 2
                }
              }
            ]
          },
          {
            "table": {
              "name": "thesaurus",
              "schema": "smb"
            },
            "array_relationships": [
              {
                "name": "i18n",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "thesaurus_id",
                    "table": {
                      "name": "thesaurus_translations",
                      "schema": "smb"
                    }
                  }
                }
              },
              {
                "name": "parent",
                "using": {
                  "foreign_key_constraint_on": {
                    "column": "parent_id",
                    "table": {
                      "name": "thesaurus",
                      "schema": "smb"
                    }
                  }
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "mds_id",
                    "parent_id",
                    "instance",
                    "name",
                    "type",
                    "created_at",
                    "updated_at"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "name"
                  ],
                  "filter": {
                    "_not": {
                      "_or": [
                        {
                          "_and": [
                            {
                              "instance": {
                                "_eq": "ObjGeographicTypeVgr"
                              }
                            },
                            {
                              "name": {
                                "_in": [
                                  "Statistischer Bezug",
                                  "Fundort Ausgabe",
                                  "Fundort (aktueller)",
                                  "Fundort (normiert)",
                                  "Fundort (Variante)",
                                  "Fundort (historisch 1800)",
                                  "Fundort (historisch 1900)",
                                  "Fundort (historisch 2000)"
                                ]
                              }
                            }
                          ]
                        },
                        {
                          "_and": [
                            {
                              "instance": {
                                "_eq": "ObjPerAssociationRoleVgr"
                              }
                            },
                            {
                              "name": {
                                "_in": [
                                  "Leihgeber",
                                  "Mzen",
                                  "Nachlasser",
                                  "Person",
                                  "Veruerer",
                                  "Vorbesitzer"
                                ]
                              }
                            }
                          ]
                        },
                        {
                          "_and": [
                            {
                              "instance": {
                                "_eq": "GenLocationVgr"
                              }
                            },
                            {
                              "name": {
                                "_ilike": "%Depot%"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            ]
          },
          {
            "table": {
              "name": "thesaurus_translations",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "language",
                "using": {
                  "foreign_key_constraint_on": "language_id"
                }
              },
              {
                "name": "thesaurus",
                "using": {
                  "foreign_key_constraint_on": "thesaurus_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "id",
                    "language_id",
                    "thesaurus_id",
                    "value"
                  ],
                  "filter": {}
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "value"
                  ],
                  "filter": {}
                }
              }
            ]
          },
          {
            "table": {
              "name": "user",
              "schema": "smb"
            },
            "object_relationships": [
              {
                "name": "user_role",
                "using": {
                  "foreign_key_constraint_on": "role_id"
                }
              }
            ],
            "select_permissions": [
              {
                "role": "authservice",
                "permission": {
                  "columns": [
                    "editor_scope",
                    "email",
                    "id",
                    "password",
                    "role_id"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              },
              {
                "role": "editor",
                "permission": {
                  "columns": [
                    "email"
                  ],
                  "filter": {
                    "id": {
                      "_eq": "X-Hasura-User-Id"
                    }
                  }
                }
              },
              {
                "role": "public",
                "permission": {
                  "columns": [
                    "email"
                  ],
                  "filter": {
                    "id": {
                      "_eq": "X-Hasura-User-Id"
                    }
                  }
                }
              }
            ]
          },
          {
            "table": {
              "name": "user_role",
              "schema": "smb"
            },
            "select_permissions": [
              {
                "role": "authservice",
                "permission": {
                  "columns": [
                    "id",
                    "role"
                  ],
                  "filter": {},
                  "allow_aggregations": true
                }
              }
            ]
          }
        ],
        "configuration": {
          "connection_info": {
            "database_url": {
              "from_env": "HASURA_GRAPHQL_DATABASE_URL"
            },
            "isolation_level": "read-committed",
            "pool_settings": {
              "connection_lifetime": 600,
              "idle_timeout": 180,
              "max_connections": 50,
              "retries": 1
            },
            "use_prepared_statements": true
          }
        }
      }
    ],
    "remote_schemas": [
      {
        "name": "stt-hbf-strapi",
        "definition": {
          "url_from_env": "REMOTE_SCHEMA_HBF_STRAPI",
          "timeout_seconds": 60,
          "customization": {
            "root_fields_namespace": "strapi_hbf",
            "type_names": {
              "mapping": {}
            }
          }
        },
        "comment": "STT backend HBF"
      },
      {
        "name": "stt-isl-strapi",
        "definition": {
          "url_from_env": "REMOTE_SCHEMA_ISL_STRAPI",
          "timeout_seconds": 60,
          "customization": {
            "root_fields_namespace": "strapi_isl",
            "type_names": {
              "mapping": {}
            }
          },
          "forward_client_headers": true
        },
        "comment": "STT backend ISL"
      },
      {
        "name": "stt-kgm-strapi",
        "definition": {
          "url_from_env": "REMOTE_SCHEMA_KGM_STRAPI",
          "timeout_seconds": 60,
          "customization": {
            "root_fields_namespace": "strapi_kgm",
            "type_names": {
              "mapping": {}
            }
          },
          "forward_client_headers": true
        },
        "comment": "STT backend KGM"
      },
      {
        "name": "stt-smb-strapi",
        "definition": {
          "url_from_env": "REMOTE_SCHEMA_SMB_STRAPI",
          "timeout_seconds": 60,
          "customization": {
            "root_fields_namespace": "strapi_smb",
            "type_names": {
              "mapping": {}
            }
          }
        },
        "comment": "STT backend SMB"
      }
    ]
  }
}