
# Insert or update an Attachment
mutation InsertOrUpdateAttachment($filename: String!, $primary: Boolean!, $objectId: bigint!, $credits: String) {
    insert_smb_attachments_one(object: {
        attachment: $filename,
        primary: $primary,
        object_id: $objectId,
        credits: $credits,
    }, on_conflict: {
        constraint: attachments_attachment_key
        update_columns: [primary, object_id, credits],
    }) {
        id
    }
}

# Delete an Attachment by id
mutation DeleteAttachment($attachmentId: bigint!) {
    delete_smb_attachments_by_pk(id: $attachmentId) {
        id
    }
}

# Delete all Attachments for an Object
mutation DeleteAttachmentsByObjectId($objectId: bigint!) {
    delete_smb_attachments(where: {object_id: {_eq: $objectId}}) {
        returning {
            id
        }
    }
}
